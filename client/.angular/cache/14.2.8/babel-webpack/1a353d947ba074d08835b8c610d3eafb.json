{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Gajanan/Desktop/Furniture_Mart-master/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../services/rest-api.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"../services/data.service\";\nimport * as i5 from \"@angular/common\";\n\nfunction SigninComponent_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20)(1, \"label\", 21);\n    i0.ɵɵtext(2, \" Invalid Email \");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction SigninComponent_div_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20)(1, \"label\", 21);\n    i0.ɵɵtext(2, \" Invalid Password \");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nexport class SigninComponent {\n  constructor(fb, rest, router, dataS) {\n    var _this = this;\n\n    this.fb = fb;\n    this.rest = rest;\n    this.router = router;\n    this.dataS = dataS;\n    this.LoginForm = this.fb.group({\n      email: ['', [Validators.required, Validators.email]],\n      password: ['', [Validators.required, Validators.minLength(6)]]\n    });\n    this.login = /*#__PURE__*/_asyncToGenerator(function* () {\n      console.log(_this.LoginForm.value);\n\n      try {\n        const data = yield _this.rest.post('http://localhost:3000/api/user/signin', _this.LoginForm.value);\n        console.log(\"kfdj\", data);\n\n        if (data['success']) {\n          if (data['user'].role == 'user') {\n            localStorage.setItem(\"token\", data[\"token\"]);\n            yield _this.dataS.getProfile();\n\n            _this.router.navigateByUrl('user-dashboard');\n          } else if (data['user'].role == 'admin') {\n            localStorage.setItem(\"token\", data[\"token\"]);\n            yield _this.dataS.getProfile();\n\n            _this.router.navigateByUrl('admin-dashboard');\n          }\n        }\n\n        _this.LoginForm.reset();\n      } catch (error) {\n        console.log(error);\n      }\n    });\n  }\n\n  ngOnInit() {\n    console.log(this.LoginForm);\n\n    if (localStorage.getItem(\"token\")) {\n      this.router.navigateByUrl('user-dashboard');\n    }\n  }\n\n}\n\nSigninComponent.ɵfac = function SigninComponent_Factory(t) {\n  return new (t || SigninComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.RestApiService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.DataService));\n};\n\nSigninComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: SigninComponent,\n  selectors: [[\"app-signin\"]],\n  decls: 32,\n  vars: 4,\n  consts: [[1, \"\"], [1, \"px-4\", \"px-md-5\", \"text-center\", \"text-lg-start\", 2, \"margin-top\", \"-50px\"], [1, \"container\"], [1, \"row\", \"gx-lg-5\", \"align-items-center\"], [1, \"col-lg-6\", \"mb-5\", \"mb-lg-0\"], [1, \"my-5\", \"display-3\", \"fw-bold\", \"ls-tight\"], [1, \"text-primary\"], [2, \"color\", \"hsl(217, 10%, 50.8%)\"], [1, \"card\", 2, \"margin-top\", \"55px\"], [1, \"card-body\", \"py-3\", \"px-md-3\"], [3, \"formGroup\", \"ngSubmit\"], [1, \"form-outline\", \"mb-1\"], [\"type\", \"text\", \"name\", \"\", \"id\", \"\", \"placeholder\", \"Email\", \"formControlName\", \"email\", 1, \"form-control\"], [\"for\", \"form3Example3\", 1, \"form-label\", \"ms-2\"], [\"class\", \"ms-2   text-danger\", \"style\", \"font-size:15px;\", 4, \"ngIf\"], [\"type\", \"password\", \"name\", \"\", \"id\", \"\", \"placeholder\", \"Password\", \"formControlName\", \"password\", 1, \"form-control\"], [\"for\", \"form3Example4\", 1, \"form-label\", \"ms-2\"], [\"type\", \"submit\", 1, \"form-control\", \"btn\", \"btn-outline-primary\", \"mt-2\", 3, \"disabled\"], [1, \"mt-3\"], [\"routerLink\", \"/signup\", 1, \"ms-2\", 2, \"text-decoration\", \"none\"], [1, \"ms-2\", \"text-danger\", 2, \"font-size\", \"15px\"], [\"for\", \"form3Example3\", 1, \"form-label\"]],\n  template: function SigninComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"section\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"h1\", 5);\n      i0.ɵɵtext(6, \" Welcome to \");\n      i0.ɵɵelement(7, \"br\");\n      i0.ɵɵelementStart(8, \"span\", 6);\n      i0.ɵɵtext(9, \"Furniture Mart\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(10, \"p\", 7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"div\", 4)(12, \"div\", 8)(13, \"div\", 9)(14, \"form\", 10);\n      i0.ɵɵlistener(\"ngSubmit\", function SigninComponent_Template_form_ngSubmit_14_listener() {\n        return ctx.login();\n      });\n      i0.ɵɵelementStart(15, \"div\", 11);\n      i0.ɵɵelement(16, \"input\", 12);\n      i0.ɵɵelementStart(17, \"label\", 13);\n      i0.ɵɵtext(18, \"Email address\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(19, SigninComponent_div_19_Template, 3, 0, \"div\", 14);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(20, \"div\", 11);\n      i0.ɵɵelement(21, \"input\", 15);\n      i0.ɵɵelementStart(22, \"label\", 16);\n      i0.ɵɵtext(23, \"Password\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(24, SigninComponent_div_24_Template, 3, 0, \"div\", 14);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(25, \"button\", 17);\n      i0.ɵɵtext(26, \"Signin\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(27, \"div\", 18)(28, \"span\");\n      i0.ɵɵtext(29, \"Create Account\");\n      i0.ɵɵelementStart(30, \"a\", 19);\n      i0.ɵɵtext(31, \"Signup\");\n      i0.ɵɵelementEnd()()()()()()()()()()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(14);\n      i0.ɵɵproperty(\"formGroup\", ctx.LoginForm);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", !ctx.LoginForm.controls.email.valid && ctx.LoginForm.controls.email.dirty);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", !ctx.LoginForm.controls.password.valid && ctx.LoginForm.controls.password.dirty);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"disabled\", !ctx.LoginForm.valid);\n    }\n  },\n  dependencies: [i5.NgIf, i3.RouterLinkWithHref, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName],\n  styles: [\".container[_ngcontent-%COMP%]{\\n    display:flex;\\n    justify-content: center;\\n    margin-top: 50px;\\n\\n}\\n.form-btn[_ngcontent-%COMP%]{\\n    display:flex;\\n    justify-content: center;\\n}\\nform[_ngcontent-%COMP%]{\\n    padding:60px;\\n    border:1px solid #8e8e8e;\\n    border-radius: 9px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNpZ25pbi5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0ksWUFBWTtJQUNaLHVCQUF1QjtJQUN2QixnQkFBZ0I7O0FBRXBCO0FBQ0E7SUFDSSxZQUFZO0lBQ1osdUJBQXVCO0FBQzNCO0FBQ0E7SUFDSSxZQUFZO0lBQ1osd0JBQXdCO0lBQ3hCLGtCQUFrQjtBQUN0QiIsImZpbGUiOiJzaWduaW4uY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5jb250YWluZXJ7XG4gICAgZGlzcGxheTpmbGV4O1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIG1hcmdpbi10b3A6IDUwcHg7XG5cbn1cbi5mb3JtLWJ0bntcbiAgICBkaXNwbGF5OmZsZXg7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG59XG5mb3Jte1xuICAgIHBhZGRpbmc6NjBweDtcbiAgICBib3JkZXI6MXB4IHNvbGlkICM4ZThlOGU7XG4gICAgYm9yZGVyLXJhZGl1czogOXB4O1xufVxuIl19 */\"]\n});","map":{"version":3,"mappings":"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","names":["Validators","i0","SigninComponent","constructor","fb","rest","router","dataS","group","email","required","password","minLength","console","log","LoginForm","value","data","post","role","localStorage","setItem","getProfile","navigateByUrl","reset","error","ngOnInit","getItem","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\Gajanan\\Desktop\\Furniture_Mart-master\\client\\src\\app\\signin\\signin.component.ts","C:\\Users\\Gajanan\\Desktop\\Furniture_Mart-master\\client\\src\\app\\signin\\signin.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { async } from '@angular/core/testing';\nimport { FormBuilder, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { DataService } from '../services/data.service';\nimport { RestApiService } from '../services/rest-api.service';\n\n@Component({\n  selector: 'app-signin',\n  templateUrl: './signin.component.html',\n  styleUrls: ['./signin.component.css']\n})\nexport class SigninComponent implements OnInit {\n\n  LoginForm: any = this.fb.group({\n\n    email: ['',[Validators.required,Validators.email]],\n\n    password: ['',[Validators.required,Validators.minLength(6)]],\n\n  })\n  constructor(private fb: FormBuilder, private rest: RestApiService,private router:Router,private dataS:DataService) { }\n\n  ngOnInit(): void {\n    console.log(this.LoginForm);\n    \n    if(localStorage.getItem(\"token\")){\n      this.router.navigateByUrl('user-dashboard')\n    }\n  }\n\n\n  login = async () => {\n    console.log(this.LoginForm.value);\n\n    try {\n\n      const data:any= await this.rest.post('http://localhost:3000/api/user/signin', this.LoginForm.value)\n      console.log(\"kfdj\", data);\n      if(data['success'] ){\n        if(data['user'].role =='user'){\n          localStorage.setItem(\"token\",data[\"token\"])\n          await this.dataS.getProfile()\n         this.router.navigateByUrl('user-dashboard')\n        }else if(data['user'].role =='admin'){\n          localStorage.setItem(\"token\",data[\"token\"])\n          await this.dataS.getProfile()\n      \n          this.router.navigateByUrl('admin-dashboard')\n        }\n        \n      }\n\n\n      this.LoginForm.reset()\n\n\n    } catch (error) {\n      console.log(error);\n\n    }\n\n\n  }\n\n}\n","<!-- Section: Design Block -->\n<section class=\"\">\n    <!-- Jumbotron -->\n    <div style=\"height:100vh;\" class=\"px-4  px-md-5 text-center text-lg-start\" style=\"background-color: hsl(0, 0%, 96%)\" style=\"margin-top: -50px;\">\n        <div class=\"container \">\n            <div class=\"row gx-lg-5 align-items-center\">\n                <div class=\"col-lg-6 mb-5 mb-lg-0\" >\n                    <h1 class=\"cd\" class=\"my-5 display-3 fw-bold ls-tight\">\n                        Welcome to <br />\n                        <span class=\"text-primary\">Furniture Mart</span>\n                    </h1>\n                    <p style=\"color: hsl(217, 10%, 50.8%)\">\n\n\n                    </p>\n                </div>\n\n                <div class=\"col-lg-6 mb-5 mb-lg-0\">\n                    <div class=\"card\"  style=\"margin-top:55px;\">\n                        <div class=\"card-body  py-3 px-md-3\">\n                            <form [formGroup]=\"LoginForm\" (ngSubmit)=\"login()\">\n                                <!-- 2 column grid layout with text inputs for the first and last names -->\n                             \n\n                                <!-- Email input -->\n                                <div class=\"form-outline mb-1\">\n                                    <input type=\"text\" name=\"\" class=\"form-control\" id=\"\" placeholder=\"Email\"\n                                        formControlName=\"email\">\n                                    <label class=\"form-label ms-2\" for=\"form3Example3\">Email address</label>\n                                    <div *ngIf=\"!LoginForm.controls.email.valid && LoginForm.controls.email.dirty\" class=\"ms-2   text-danger\" style=\"font-size:15px;\">\n                                        <label class=\"form-label \" for=\"form3Example3\">\n                                          Invalid Email\n                                        </label>\n                                       </div>\n                                </div>\n\n                                <!-- Password input -->\n                                <div class=\"form-outline mb-1\">\n                                    <input type=\"password\" name=\"\" class=\"form-control\" id=\"\" placeholder=\"Password\"\n                                        formControlName=\"password\">\n                                    <label class=\"form-label ms-2\" for=\"form3Example4\">Password</label>\n                                    <div *ngIf=\"!LoginForm.controls.password.valid && LoginForm.controls.password.dirty\" class=\"ms-2   text-danger\" style=\"font-size:15px;\">\n                                        <label class=\"form-label \" for=\"form3Example3\">\n                                          Invalid Password\n                                        </label>\n                                       </div>\n                                </div>\n\n\n\n\n                                <!-- Submit button -->\n                                <button [disabled]=\"!LoginForm.valid\" type=\"submit\" class=\"form-control btn btn-outline-primary mt-2\">Signin</button>\n\n\n                                 <div class=\"mt-3\">\n                                    <span>Create Account<a class=\"ms-2\" style=\"text-decoration:none;\" routerLink=\"/signup\">Signup</a></span>\n                                 </div>\n\n                            </form>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <!-- Jumbotron -->\n</section>\n<!-- Section: Design Block -->\n\n\n\n\n\n\n\n\n<!-- \n<div class=\"container \">\n    <form [formGroup]=\"LoginForm\" (ngSubmit)=\"login()\">\n        <div class=\"header text-center\"><h4>Signup</h4></div>\n     \n        <div class=\"inp-item mt-2\">\n            <input type=\"text\" name=\"\" class=\"form-control\" id=\"\" placeholder=\"Email\" formControlName=\"email\">\n        </div>\n        <div class=\"inp-item mt-2\">\n            <input type=\"password\" name=\"\" class=\"form-control\" id=\"\" placeholder=\"Password\" formControlName=\"password\">\n        </div>\n        <div class=\"form-btn mt-4 \">\n             <button type=\"submit\" class=\"form-control\">Signin</button>\n        </div>\n    </form>\n</div>  -->"]},"metadata":{},"sourceType":"module"}